---
import BaseLayout from "../layouts/BaseLayout.astro";
import HorizontalCard from "../components/HorizontalCard.astro";
import { getCollection } from "astro:content";
import { SITE_TITLE, SITE_DESCRIPTION } from "../config";
import createSlug from "../lib/createSlug"

const posts = await getCollection("blog");
const sortedPosts = posts
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 5);
---

<BaseLayout
	title={SITE_TITLE}
	description={SITE_DESCRIPTION}
	sideBaseActiveItemID="home"
>
	<main class="container mx-auto lg:px-6 px-6 py-6">
		<div class="flex flex-col justify-center">
			<div class="text-xl py-1">Hey there ðŸ‘‹</div>
			<h1 class="text-4xl lg:text-6xl font-bold">
				I'm <span class="text-primary">Syed Aslam</span>
			</h1>
			<p class="text-xl lg:text-2xl text-base-content/80 mt-4 max-w-2xl">
				Developer passionate about creating meaningful software and sharing knowledge through writing. I hope you find it useful!
			</p>
			<div class="flex gap-4 mt-8">
				<a href="https://x.com/syedaslam" class="btn">
					Let's connect!
				</a>
				<a href="/blog" class="btn btn-primary">
					Read My Blog
				</a>
			</div>
		</div>

		<div class="divider my-12"></div>

		<section>
			<div class="text-3xl w-full font-bold mb-5 mt-10">Latest Posts</div>
			{sortedPosts.map((post, index) => (
				<>
					<HorizontalCard
						title={post.data.title}
						desc={post.data.description}
						img={post.data.heroImage || `https://picsum.photos/seed/post-${index}/400/200`}
						url={"/blog/" + createSlug(post.data.title, post.slug)}
						tags={post.data.tags}
						target="_self"
						badge={post.data.badge}
					/>
					<div class="divider my-0" />
				</>
			))}
			<div class="text-center mt-8">
				<a href="/blog" class="btn btn-primary">
					View All Posts
				</a>
			</div>
		</section>
	</main>
</BaseLayout>
