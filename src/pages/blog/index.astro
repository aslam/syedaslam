---
import BaseHead from "../../components/BaseHead.astro";
import BaseLayout from "../../layouts/BaseLayout.astro";
import Card from "../../components/Card.astro";
import { getCollection } from "astro:content";
import { SITE_TITLE, SITE_DESCRIPTION } from "../../config";

const posts = await getCollection("blog");
const sortedPosts = posts.sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<BaseLayout
	title={`Blog - ${SITE_TITLE}`}
	description={SITE_DESCRIPTION}
	sideBarActiveItemID="blog"
>
	<BaseHead title={`Blog - ${SITE_TITLE}`} description={SITE_DESCRIPTION} />

	<main class="container mx-auto lg:px-6 px-6 py-12">
		<div class="text-center mb-12">
			<h1 class="text-4xl lg:text-6xl font-bold mb-4">Blog</h1>
			<p class="text-xl text-base-content/80">
				Thoughts, tutorials, and insights about technology and development
			</p>
		</div>

		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
			{sortedPosts.map((post, index) => (
				<Card
					title={post.data.title}
					description={post.data.description}
					img={post.data.heroImage || `https://picsum.photos/seed/blog-${index}/400/200`}
					url={`/blog/${post.id}/`}
					tags={["Technology", "Development"]}
				/>
			))}
		</div>
	</main>
</BaseLayout>
